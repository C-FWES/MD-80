<?xml version="1.0"?>

<!-- McDonnell Douglas MD-80 Cockpit -->
<!-- Copyright (c) 2020 Josh Davidson (Octal450) -->

<system name="MD-80: Cockpit"> <!-- Everything here is after all systems -->
	
	<channel name="Animations">
		
		<lag_filter name="fcs-actual/elevator-trim-lever">
			<input>/controls/flight/elevator-trim-lever</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="fcs-actual/tiller-handle">
			<input>fcs-actual/tiller/handle-scheduled</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="engine/throttle-lever[0]">
			<input>engine/control-1/throttle-pos</input>
			<c1>20</c1>
			<output>fcs/throttle-lever-feedback[0]</output>
		</lag_filter>
		
		<lag_filter name="engine/throttle-lever[1]">
			<input>engine/control-2/throttle-pos</input>
			<c1>20</c1>
			<output>fcs/throttle-lever-feedback[1]</output>
		</lag_filter>
		
		<lag_filter name="engine/reverse-lever[0]">
			<input>/controls/engines/engine[0]/reverse-lever</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="engine/reverse-lever[1]">
			<input>/controls/engines/engine[1]/reverse-lever</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="fcs-actual/flap-lever">
			<input>/controls/flight/flaps-input</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="spoilers/main-lever">
			<input>spoilers/lever-cmd</input>
			<c1>20</c1>
		</lag_filter>
		
		<lag_filter name="spoilers/lever-arm">
			<input>/controls/flight/speedbrake-arm</input>
			<c1>20</c1>
		</lag_filter>
	
	</channel>
	
	<channel name="Animations Execrate 4" execrate="4">
		
		<lag_filter name="/it-autoflight/input/active-ap-lag">
			<input>/it-autoflight/input/active-ap</input>
			<c1>20</c1>
		</lag_filter>
	
	</channel>
	
	<channel name="Gauge Extras" execrate="4">
		
		<!-- EPR Gauges -->
		<fcs_function name="engine/gauge/epr-actual-1-fixed">
			<function>
				<sum>
					<property>engine/epr-actual-1</property>
					<value>0.003</value>
				</sum>
			</function>
		</fcs_function>
		
		<fcs_function name="engine/gauge/epr-actual-1-d100">
			<function>
				<integer>
					<property>engine/gauge/epr-actual-1-fixed</property>
				</integer>
			</function>
		</fcs_function>
		
		<fcs_function name="engine/gauge/epr-actual-1-d10">
			<function>
				<integer>
					<product>
						<difference>
							<property>engine/gauge/epr-actual-1-fixed</property>
							<integer>
								<property>engine/gauge/epr-actual-1-fixed</property>
							</integer>
						</difference>
						<value>10</value>
					</product>
				</integer>
			</function>
		</fcs_function>
		
		<fcs_function name="engine/gauge/epr-actual-1-d1">
			<function>
				<product>
					<fraction>
						<product>
							<property>engine/epr-actual-1</property> <!-- Not epr-fixed on purpose! -->
							<value>10</value>
						</product>
					</fraction>
					<value>10</value>
				</product>
			</function>
		</fcs_function>
		
		<fcs_function name="engine/gauge/epr-actual-2-fixed">
			<function>
				<sum>
					<property>engine/epr-actual-2</property>
					<value>0.003</value>
				</sum>
			</function>
		</fcs_function>
		
		<fcs_function name="engine/gauge/epr-actual-2-d100">
			<function>
				<integer>
					<property>engine/gauge/epr-actual-2-fixed</property>
				</integer>
			</function>
		</fcs_function>
		
		<fcs_function name="engine/gauge/epr-actual-2-d10">
			<function>
				<integer>
					<product>
						<difference>
							<property>engine/gauge/epr-actual-2-fixed</property>
							<integer>
								<property>engine/gauge/epr-actual-2-fixed</property>
							</integer>
						</difference>
						<value>10</value>
					</product>
				</integer>
			</function>
		</fcs_function>
		
		<fcs_function name="engine/gauge/epr-actual-2-d1">
			<function>
				<product>
					<fraction>
						<product>
							<property>engine/epr-actual-2</property> <!-- Not epr-fixed on purpose! -->
							<value>10</value>
						</product>
					</fraction>
					<value>10</value>
				</product>
			</function>
		</fcs_function>
		
		<!-- TRI -->
		<fcs_function name="/controls/tri/rat-fixed">
			<function>
				<sum>
					<abs>
						<property>propulsion/tat-c</property>
					</abs>
					<value>0.5</value> <!-- Make it round correctly -->
				</sum>
			</function>
		</fcs_function>
		
		<fcs_function name="/controls/tri/rat-d10">
			<function>
				<integer>
					<quotient>
						<property>/controls/tri/rat-fixed</property>
						<value>10</value>
					</quotient>
				</integer>
			</function>
		</fcs_function>
		
		<fcs_function name="/controls/tri/rat-d1">
			<function>
				<integer>
					<product>
						<fraction>
							<quotient>
								<property>/controls/tri/rat-fixed</property>
								<value>10</value>
							</quotient>
						</fraction>
						<value>10</value>
					</product>
				</integer>
			</function>
		</fcs_function>
		
		<fcs_function name="/controls/tri/limit-fixed">
			<function>
				<sum>
					<property>engine/limit/active-ind</property>
					<value>0.005</value> <!-- Make it round correctly -->
				</sum>
			</function>
		</fcs_function>
		
		<fcs_function name="/controls/tri/limit-d100">
			<function>
				<integer>
					<property>/controls/tri/limit-fixed</property>
				</integer>
			</function>
		</fcs_function>
		
		<fcs_function name="/controls/tri/limit-d10">
			<function>
				<integer>
					<product>
						<difference>
							<property>/controls/tri/limit-fixed</property>
							<integer>
								<property>/controls/tri/limit-fixed</property>
							</integer>
						</difference>
						<value>10</value>
					</product>
				</integer>
			</function>
		</fcs_function>
		
		<fcs_function name="/controls/tri/limit-d1">
			<function>
				<product>
					<fraction>
						<product>
							<property>/controls/tri/limit-fixed</property>
							<value>10</value>
						</product>
					</fraction>
					<value>10</value>
				</product>
			</function>
		</fcs_function>
	
	</channel>

</system>
